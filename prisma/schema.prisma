// Kitchen Core Custom CMS Schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

// User & Authentication
model User {
  id            String    @id @default(cuid())
  email         String    @unique
  password      String    // Hashed
  name          String?
  role          UserRole  @default(ADMIN)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

enum UserRole {
  ADMIN
  EDITOR
}

// Portfolio Projects
model Project {
  id            String    @id @default(cuid())
  title         String
  slug          String    @unique
  location      String
  category      ProjectCategory
  image         String    // Main image URL
  gallery       String[]  // Array of image URLs
  description   String
  year          String
  area          String
  budget        String
  materials     String[]
  appliances    String[]
  features      String[]
  duration      String
  challenges    String    @db.Text
  innovations   String[]
  featured      Boolean   @default(false)
  order         Int       @default(0)
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([category])
  @@index([featured])
  @@index([order])
}

enum ProjectCategory {
  PALACE
  VILLA
  ESTATE
  PENTHOUSE
}

// Gallery Images
model GalleryImage {
  id            String    @id @default(cuid())
  title         String
  image         String    // Image URL
  category      ProjectCategory
  location      String
  size          GallerySize
  description   String
  order         Int       @default(0)
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([category])
  @@index([order])
}

enum GallerySize {
  SMALL
  MEDIUM
  LARGE
  WIDE
  TALL
}

// Testimonials
model Testimonial {
  id            String    @id @default(cuid())
  name          String
  title         String
  location      String
  image         String    // Client image URL
  quote         String    @db.Text
  rating        Int       @default(5)
  project       String
  featured      Boolean   @default(false)
  order         Int       @default(0)
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([featured])
  @@index([order])
}

// Process Steps
model ProcessStep {
  id            String    @id @default(cuid())
  number        String
  title         String
  description   String    @db.Text
  duration      String
  iconName      String    // Icon identifier
  order         Int       @unique
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([order])
}

// Services
model Service {
  id            String    @id @default(cuid())
  title         String
  description   String    @db.Text
  features      String[]
  order         Int       @default(0)
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([order])
}

// Statistics/Metrics
model Statistic {
  id            String    @id @default(cuid())
  number        String
  label         String
  section       StatSection
  order         Int       @default(0)
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([section])
  @@index([order])
}

enum StatSection {
  HOMEPAGE_TRUST
  GALLERY_STATS
}

// Founder Information (Singleton)
model Founder {
  id            String    @id @default(cuid())
  name          String
  title         String
  image         String    // Portrait image URL
  bio           String    @db.Text
  education     String[]
  recognition   String[]
  quote         String    @db.Text
  published     Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

// Site Settings (Singleton)
model SiteSettings {
  id                String    @id @default(cuid())
  siteTitle         String
  heroTagline       String?
  heroHeading       String?
  heroSubheading    String?   @db.Text
  heroImage         String?   // Hero background image URL
  contactPhone      String?
  contactEmail      String?
  showroomAddress   String?   @db.Text
  instagramUrl      String?
  pinterestUrl      String?
  linkedinUrl       String?
  houzzUrl          String?
  partnerships      String[]  // Brand partners
  seoDescription    String?   @db.Text
  seoKeywords       String[]
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
}

// ===== NEW CMS MODELS =====

// Hero Section (Singleton) - Bilingual
model HeroSection {
  id                  String   @id @default(cuid())
  badgeEn             String
  badgeAr             String
  titleEn             String
  titleAr             String
  titleHighlightEn    String
  titleHighlightAr    String
  descriptionEn       String   @db.Text
  descriptionAr       String   @db.Text
  backgroundImage     String
  cta1TextEn          String
  cta1TextAr          String
  cta1Link            String
  cta2TextEn          String
  cta2TextAr          String
  cta2Link            String
  published           Boolean  @default(true)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
}

// Nass Gallery Collections - Bilingual
model NassGallery {
  id                String        @id @default(cuid())
  collectionKey     String        @unique // "nass0", "nass1", "nass2", "nass3", "nass4"
  badgeEn           String
  badgeAr           String
  titleEn           String
  titleAr           String
  titleHighlightEn  String
  titleHighlightAr  String
  descriptionEn     String        @db.Text
  descriptionAr     String        @db.Text
  images            NassImage[]
  features          NassFeature[]
  order             Int           @default(0)
  published         Boolean       @default(true)
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt

  @@index([collectionKey])
  @@index([order])
}

model NassImage {
  id          String      @id @default(cuid())
  gallery     NassGallery @relation(fields: [galleryId], references: [id], onDelete: Cascade)
  galleryId   String
  src         String
  alt         String
  title       String?
  size        GallerySize @default(MEDIUM)
  order       Int         @default(0)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  @@index([galleryId])
  @@index([order])
}

model NassFeature {
  id              String      @id @default(cuid())
  gallery         NassGallery @relation(fields: [galleryId], references: [id], onDelete: Cascade)
  galleryId       String
  icon            String?
  labelEn         String
  labelAr         String
  descriptionEn   String
  descriptionAr   String
  order           Int         @default(0)
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt

  @@index([galleryId])
  @@index([order])
}

// Videos - Bilingual
model Video {
  id              String   @id @default(cuid())
  titleEn         String
  titleAr         String
  descriptionEn   String   @db.Text
  descriptionAr   String   @db.Text
  url             String   // Vercel Blob URL
  thumbnail       String?
  order           Int      @default(0)
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([order])
}

// Before/After Comparisons - Bilingual
model BeforeAfter {
  id              String   @id @default(cuid())
  titleEn         String
  titleAr         String
  beforeImage     String
  afterImage      String
  descriptionEn   String?  @db.Text
  descriptionAr   String?  @db.Text
  order           Int      @default(0)
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([order])
}

// Technical Specifications - Bilingual
model TechnicalSpec {
  id              String   @id @default(cuid())
  titleEn         String
  titleAr         String
  descriptionEn   String   @db.Text
  descriptionAr   String   @db.Text
  icon            String
  category        String
  order           Int      @default(0)
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([category])
  @@index([order])
}

// Innovation Features - Bilingual
model Innovation {
  id              String   @id @default(cuid())
  titleEn         String
  titleAr         String
  descriptionEn   String   @db.Text
  descriptionAr   String   @db.Text
  icon            String
  order           Int      @default(0)
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([order])
}

// Credentials/Certifications - Bilingual
model Credential {
  id              String   @id @default(cuid())
  titleEn         String
  titleAr         String
  issuer          String
  image           String?
  descriptionEn   String?  @db.Text
  descriptionAr   String?  @db.Text
  year            String?
  order           Int      @default(0)
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([order])
}

// Engineering Metrics - Bilingual
model EngineeringMetric {
  id              String   @id @default(cuid())
  number          String
  labelEn         String
  labelAr         String
  descriptionEn   String?
  descriptionAr   String?
  icon            String?
  order           Int      @default(0)
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([order])
}

// Partnerships/Brand Logos - Bilingual
model Partnership {
  id          String   @id @default(cuid())
  nameEn      String
  nameAr      String
  logo        String?
  url         String?
  order       Int      @default(0)
  published   Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([order])
}

// CTA Section (Singleton) - Bilingual
model CTASection {
  id              String   @id @default(cuid())
  badgeEn         String?
  badgeAr         String?
  titleEn         String
  titleAr         String
  descriptionEn   String   @db.Text
  descriptionAr   String   @db.Text
  buttonTextEn    String
  buttonTextAr    String
  buttonLink      String
  image           String?
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
